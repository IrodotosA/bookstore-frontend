<div class="settings-page">
  <h1>Account Settings</h1>

  <!-- PROFILE CARD -->
  <div class="card">
    <h2>Profile Information</h2>

    <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
      <div class="form-grid">

        <!-- NAME -->
        <div class="field">
          <label>Name</label>
          <input pInputText formControlName="name" />

          @if (pf['name'].touched && pf['name'].hasError('required')) {
            <p-message 
              severity="error"
              text="Name is required">
            </p-message>
          }
        </div>

        <!-- EMAIL -->
        <div class="field">
          <label>Email</label>
          <input pInputText formControlName="email" />

          @if (pf['email'].touched && pf['email'].hasError('required')) {
            <p-message 
              severity="error"
              text="Email is required">
            </p-message>
          }

          @if (pf['email'].touched && pf['email'].hasError('email')) {
            <p-message 
              severity="error"
              text="Invalid email format">
            </p-message>
          }
        </div>

      </div>

      <button 
        pButton 
        type="submit"
        label="Save Changes"
        [disabled]="profileForm.invalid">
      </button>
    </form>
  </div>


  <!-- PASSWORD CARD -->
  <div class="card">
    <h2>Change Password</h2>

    <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
      <div class="form-grid">

        <!-- OLD PASSWORD -->
        <div class="field">
          <label>Old Password</label>
          <input pInputText type="password" formControlName="oldPassword" />

          @if (pwf['oldPassword'].touched && pwf['oldPassword'].hasError('required')) {
            <p-message 
              severity="error"
              text="Old password is required">
            </p-message>
          }
        </div>

        <!-- NEW PASSWORD -->
        <div class="field">
          <label>New Password</label>
          <input pInputText type="password" formControlName="newPassword" />

          @if (pwf['newPassword'].touched && pwf['newPassword'].hasError('required')) {
            <p-message 
              severity="error"
              text="New password is required">
            </p-message>
          }

          @if (pwf['newPassword'].touched && pwf['newPassword'].hasError('minlength')) {
            <p-message 
              severity="error"
              text="Must be at least 6 characters">
            </p-message>
          }

          @if (pwf['newPassword'].touched && pwf['newPassword'].hasError('weakPassword')) {
            <p-message 
              severity="error"
              text="Password must include uppercase, lowercase, number, and symbol">
            </p-message>
          }
        </div>

        <!-- CONFIRM PASSWORD -->
        <div class="field">
          <label>Confirm New Password</label>
          <input pInputText type="password" formControlName="confirmPassword" />

          @if (pwf['confirmPassword'].touched && pwf['confirmPassword'].hasError('required')) {
            <p-message 
              severity="error"
              text="Please confirm your password">
            </p-message>
          }

          @if (passwordForm.hasError('mismatch') && pwf['confirmPassword'].touched) {
            <p-message 
              severity="error"
              text="Passwords do not match">
            </p-message>
          }
        </div>

      </div>

      <button 
        pButton 
        type="submit"
        label="Change Password"
        [disabled]="passwordForm.invalid">
      </button>
    </form>
  </div>

</div>
